import{d as b,o as h,c as _,t as T,n as w,i as H,g as J,r as N,a as Q,b as ee,e as oe,s as $,f as d,h as y,w as U,j as x,v as te,k as F,p as K,l as M,m as se,u as r,F as R,q as le,x as L,y as G,z as de,A as I,B as ae,C as ne}from"./vendor.c898ea81.js";const ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};ce();const re=b({props:{active:{type:Boolean},label:null},emits:["click"],setup(e){return(o,t)=>(h(),_("a",{class:w({selected:e.active}),href:"#/",onClick:t[0]||(t[0]=l=>o.$emit("click",e.label.value))},T(e.label.displayText),3))}}),ie={apiKey:"AIzaSyDYbAbripgwbZKFfTCSqXzu116Lde_kwnE",authDomain:"todomvc-app-template-test.firebaseapp.com",databaseURL:"https://todomvc-app-template-test-default-rtdb.firebaseio.com",projectId:"todomvc-app-template-test",storageBucket:"todomvc-app-template-test.appspot.com",messagingSenderId:"492184533263",appId:"1:492184533263:web:d98c399c38d7f0c593667a"},ue=H(ie),V=J(ue),B=N(V,"todos");var i=(e=>(e[e.UNSORTED=0]="UNSORTED",e[e.ASCENDING=1]="ASCENDING",e[e.DESCENDING=2]="DESCENDING",e))(i||{});function k(e,o){return{checked:!1,message:e,id:o,key:o}}function pe(e,o,t){switch(t){case i.ASCENDING:return e.checked===o.checked?0:e.checked?1:-1;case i.DESCENDING:return e.checked===o.checked?0:e.checked?-1:1;case i.UNSORTED:return e.id===o.id?0:e.id>o.id?1:-1}}function he(e){var t;console.log("snapshot",e.val());const o=e.val()&&Object.entries(e.val()).map(([l,s])=>(s.key=parseInt(l),s));return console.log("data",o),(t=o==null?void 0:o.filter(l=>l!==void 0))!=null?t:[]}function fe(){return[k("Welcome to TodoMVC",0),k("This is a sample todo",1),k("Click on the words to edit a todo",2),k("Click on the X to delete a todo",3)]}const j=Q("todos",{state:()=>({_displayedTodos:[],_filter:"all",_sort:i.UNSORTED,maxId:0}),getters:{todos:e=>{if(!e._displayedTodos)return;const o=e._displayedTodos;switch(o.sort((t,l)=>pe(t,l,e._sort)),e._filter){case"unchecked":return o.filter(t=>!t.checked);case"checked":return o.filter(t=>t.checked);default:return o}},tasksLeft:e=>{var o,t;return(t=(o=e._displayedTodos)==null?void 0:o.filter(l=>!l.checked).length)!=null?t:0},filter:e=>e._filter},actions:{destroyTodo(e){console.log("destroying todo",e);const o=N(V,"todos/"+e.key);ee(o).then(()=>{console.log(`Todo ${e.id} saved successfully!`)}).catch(t=>{console.warn(`Todo ${e.id} could not be saved.`,t)})},clearCompleted(){this._displayedTodos&&(this._displayedTodos=this._displayedTodos.filter(e=>!e.checked),this.saveAllTodos())},loadData(){oe(B,e=>{this._displayedTodos=he(e),console.log("this._displayedTodos",this._displayedTodos);const o=this._displayedTodos.reduce((t,l)=>l.id>t?l.id:t,0);console.log({highestId:o}),this.maxId=o+1,console.log("this.maxId",this.maxId)})},setFilter(e){this._filter=e},setSort(e){this._sort=e},updateTodo(e){if(!this._displayedTodos)return;const o=this._displayedTodos.findIndex(t=>e.id===t.id);this._displayedTodos[o]=e,this.saveTodo(e)},addTodo(e){var t,l,s;const o={checked:!1,message:e,id:this.maxId++,key:((l=(t=this._displayedTodos)==null?void 0:t.reduce((n,a)=>(a.key>n,a.key),0))!=null?l:-1)+1};(s=this._displayedTodos)==null||s.push(o),this.saveTodo(o),console.log("adding todo from Pinia",e)},saveAllTodos(){var e;(e=this._displayedTodos)==null||e.forEach((o,t)=>{o.key=t}),$(B,this._displayedTodos).then(()=>{console.log("Data saved successfully!")}).catch(o=>{console.warn("Data could not be saved."+o)})},saveTodo(e){const o=N(V,"todos/"+e.key);$(o,e).then(()=>{console.log(`Todo ${e.key} saved successfully!`)}).catch(t=>{console.warn(`Todo ${e.key} could not be saved.`,t)})},loadOnboardingTodos(){this._displayedTodos=fe(),this.saveAllTodos()}}});var A=(e,o)=>{const t=e.__vccOpts||e;for(const[l,s]of o)t[l]=s;return t};const _e={class:"background"},me=b({setup(e){const o=j();function t(){o.loadOnboardingTodos(),console.log("loadOnboardingTodos")}return(l,s)=>(h(),_("div",_e,[d("p",{class:"message",onClick:t},"Load new onboarding Todos?")]))}});var ge=A(me,[["__scopeId","data-v-2a8025e4"]]);const ve=e=>(K("data-v-2337e302"),e=e(),M(),e),ye={class:"view"},ke=ve(()=>d("input",{class:"edit",value:"Create a TodoMVC template"},null,-1)),Te=b({props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","destroyTodo"],setup(e,{emit:o}){const t=e,l=y(t.modelValue.checked),s=y(t.modelValue.message);U(()=>t.modelValue,c=>{c.checked!==l.value&&(l.value=c.checked,console.log("updated checked externally")),c.message!==s.value&&(s.value=c.message,console.log("updated text externally"))}),U(()=>s.value,c=>{console.log("newMessage",c);const u=t.modelValue;u.message=c,o("update:modelValue",u)});function n(){console.log("toggleChecked",t.modelValue.checked);const c=t.modelValue;c.checked=t.modelValue.checked,l.value=t.modelValue.checked,o("update:modelValue",c)}function a(){o("destroyTodo"),console.log("destroy",t.modelValue.id)}return(c,u)=>(h(),_("li",{class:w({completed:l.value})},[d("div",ye,[x(d("input",{"onUpdate:modelValue":[u[0]||(u[0]=m=>t.modelValue.checked=m),n],class:"toggle",title:"click to toggle checked",type:"checkbox"},null,512),[[te,t.modelValue.checked]]),d("label",null,[x(d("input",{"onUpdate:modelValue":u[1]||(u[1]=m=>s.value=m),type:"text"},null,512),[[F,s.value]])]),d("button",{class:"destroy",title:"delete todo",onClick:a})]),ke],2))}});var be=A(Te,[["__scopeId","data-v-2337e302"]]);const z=e=>(K("data-v-b59b863a"),e=e(),M(),e),Ce={class:"todoapp"},Ee={class:"header"},Se=z(()=>d("h1",null,"todos",-1)),De=["onKeypress"],Ie={class:"main"},Ne=z(()=>d("input",{id:"sort-todos",class:"toggle-all",type:"checkbox"},null,-1)),xe={key:0,class:"todo-list"},Ve={class:"footer"},we={class:"todo-count"},Ae={class:"filters"},Oe=b({setup(e){const o=j();o.loadData();const t=[1,6,4,3,23,45,76];let l="hello world";console.log("should I S?");let s=l.length>5?"yes":"no";function n(p,g){if(p.length!==g.length)return!1;const E=[...p].sort().join(""),S=[...g].sort().join("");return E===S}console.log("heart is anagram of earth?",n("heart","earth")),console.log("stuff is anagram of things?",n("stuff","things")),console.log("should I S?",s),y(0);const a=y(i.UNSORTED),c=y("");function u(){console.log("showChecked")}function m(p){o.destroyTodo(p)}function q(){o.clearCompleted()}function C(p){o.setFilter(p)}function Y(){a.value=(a.value+1)%3,a.value===i.UNSORTED&&console.log("sortTodos","SortState.UNSORTED"),a.value===i.ASCENDING&&console.log("sortTodos","SortState.ASCENDING"),a.value===i.DESCENDING&&console.log("sortTodos","SortState.DESCENDING"),o.setSort(a.value)}function W(){console.log("addTodo",c.value),o.addTodo(c.value),c.value=""}function X(p){o.updateTodo(p)}return console.log(l,1,5,t,o.todos),(p,g)=>{var O;const E=be,S=ge,D=re;return h(),_(R,null,[d("section",Ce,[d("header",Ee,[Se,x(d("input",{"onUpdate:modelValue":g[0]||(g[0]=f=>c.value=f),class:"new-todo",placeholder:"What needs to be done?",autofocus:"",onKeypress:se(W,["enter"])},null,40,De),[[F,c.value]])]),d("section",Ie,[Ne,d("label",{for:"sort-todos",title:"Sort todos",class:w(["sort-arrow",{"sort-arrow-right":a.value===r(i).UNSORTED,"sort-arrow-up":a.value===r(i).ASCENDING,"sort-arrow-down":a.value===r(i).DESCENDING}]),onClick:Y},"Sort todos",2),r(o).todos?(h(),_("ul",xe,[(h(!0),_(R,null,le(r(o).todos,f=>(h(),L(E,{key:f.id,modelValue:r(o).todos[r(o).todos.findIndex(v=>f.id===v.id)],"onUpdate:modelValue":[v=>r(o).todos[r(o).todos.findIndex(Z=>f.id===Z.id)]=v,v=>X(f)],onDestroyTodo:v=>m(f)},null,8,["modelValue","onUpdate:modelValue","onDestroyTodo"]))),128)),r(o).todos.length===0?(h(),L(S,{key:0})):G("",!0)])):G("",!0)]),d("footer",Ve,[d("span",we,[d("strong",null,T(r(o).tasksLeft),1),de(" item"+T(r(o).tasksLeft===1?"":"s")+" left",1)]),d("ul",Ae,[d("li",null,[I(D,{type:"button",active:r(o).filter==="all",label:{displayText:"All",value:"all"},onClick:C},null,8,["active"])]),d("li",null,[I(D,{type:"button",active:r(o).filter==="unchecked",label:{displayText:"Unchecked",value:"unchecked"},onClick:C},null,8,["active"])]),d("li",null,[I(D,{type:"button",active:r(o).filter==="checked",label:{displayText:"Checked",value:"checked"},onClick:C},null,8,["active"])])]),d("button",{type:"button",class:"clear-completed",onClick:q}," Clear completed ")])]),d("div",{onClick:u},T((O=r(o).todos)==null?void 0:O.length),1)],64)}}});var $e=A(Oe,[["__scopeId","data-v-b59b863a"]]);const P=ae($e),Ue=ne();P.use(Ue);P.mount("#app");
